# Защищенные маршруты REACT + KEYCLOAK + Mobx

## Компоненты

#### App

#### Корневой компонент

#### В нем происходит проверка инициализации keycloak и авторизации пользователя

#### Если пользователь авторизован, то делается запрос в БД, результат хранится в Mobx

#### Все маршруты обернуты в компонент Protect

### Protect

#### Проверка возможности перехода на страницы

#### В качестве пропса role можно передавать роль пользователя, для которой будет доступна эта страница

#### Также происходит проверка по children из стейта user'а, пользователь может переходить только на те страницы которые есть в children, проверка по name, name приходит со страницы, на которую совершается переход

#### Если проверка не пройдена, то есть сотрудника нет в списке подчиненных (children) или роль пользователя не позволяет перейти на эту страницу, происходит редирект на главную страницу

#### Если protect видит, что пользователь не авторизован, то есть при попытке зайти без авторизации на защищенную страницу - редирект на страницу авторизации

## Страницы

### Home

#### Главная страница, доступна всем авторизованным пользователям

### Other

#### Страница с полной защитой (проверка на авторизацию, роль и возможность просмотра данной страницы по подчиненности)
